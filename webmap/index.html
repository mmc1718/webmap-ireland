<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="description" content="Webmap displaying peat bog coverage and loss in Ireland between 2000 and 2012" />
        <meta name="keywords" content="Corine Land Cover, Peat Bogs, Ireland, Web maps, Webmaps" />
        <meta name="author" content="Mary McGuire" />
        <title>Peat bogs of Ireland 2000 - 2012</title>
        <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
        <script src="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js"></script>
        <link href="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css" rel="stylesheet" />
        <link href="https://www.unpkg.com/@watergis/maplibre-gl-legend@latest/dist/maplibre-gl-legend.css" rel="stylesheet" />
        <script src="https://unpkg.com/maplibre-gl@3.0.0/dist/maplibre-gl.js"></script>
        <script src="https://www.unpkg.com/@watergis/maplibre-gl-legend@latest/dist/maplibre-gl-legend.umd.js"></script>
        <style>
            body {
                margin: 0;
                padding: 0;
            }
            #map {
                position: absolute;
                top: 0;
                bottom: 0;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <div id="map"></div>
        <!-- By default the legend icons are narrow.
        In this case, the css property min-width improved legibility -->
        <style>
          td.legend-table-td {
            border: 1px solid #fff;
            margin: 10px;
            padding: 2px;
            text-align: left;
            min-width: 20px;
          }
        </style>
        <script>
            const map = new maplibregl.Map({
                container: "map",
                style: "http://localhost:8080/styles/natural/style.json", // stylesheet location
                center: [-8, 53], // starting position [lng, lat]
                zoom: 7, // starting zoom
                minZoom: 6,
                maxBounds: [
                    [-17.7, 46.6],
                    [2.7, 58.6],
                ],
            });

            function setUpMap() {
              map.addSource("peat_bogs", {
                  type: "geojson",
                  data: "data/ireland_peat_bogs_2012.geojson",
              });
              map.addSource("lost_bogs", {
                  type: "geojson",
                  data: "data/peat_bog_loss.geojson",
                  // required for smooth rendering while zooming
                  tolerance: 0,
              });

              map.addLayer({
                  id: "peat_bogs",
                  type: "fill",
                  source: "peat_bogs",
                  paint: {
                      "fill-color": "#0d490c",
                      "fill-opacity": 0.4,
                  },
              });

              map.addLayer({
                  id: "lost_bogs",
                  type: "fill",
                  source: "lost_bogs",
                  paint: {
                      "fill-color": "#49270c",
                      "fill-opacity": 0.4,
                  },
              })
            };
            map.on("load", setUpMap);
            
              const legendInfo = {
                  lost_bogs: "Lost Peat Bog (Derived from Corine Land Cover (CLC) 2000, Version 2020_20u1)",
                  peat_bogs: "Peat Bog (Corine Land Cover (CLC) 2012, Version 2020_20u1)",
              };
              map.addControl(
                  new MaplibreLegendControl.MaplibreLegendControl(legendInfo, {
                      showDefault: true,
                      showCheckbox: true,
                      onlyRendered: false,
                      reverseOrder: true,
                      title: "Peat Bog loss in Ireland Between 2000 and 2012",
                  }),
                  "top-right"
              );
          
        </script>
    </body>
</html>
